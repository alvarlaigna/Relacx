"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ComponentController=function(){function t(t,e,r){for(var n,e=e.split("."),o=t,i=1;i<e.length-1;i++)n=e[i],o=o[n];return o[e.pop()]=r,t}function e(){function e(e){var r=this;this.childKeys="root",this.action=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var n=Function.prototype.bind.apply(r[t],[r].concat(e));return n},this.setState=function(r,n){if(n){var o=t(e.state,n,r);o=JSON.parse(JSON.stringify(o)),e.setState(o)}else e.setState(r)},this.getState=function(){return e.state}}return e}function r(t,e){function r(){var r=this,n=e;this.action=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var n=Function.prototype.bind.apply(r[t],[r].concat(e));return n},this.setState=function(e){var r=t.props.controller.childKeys;t.props.controller.setState(e,[r,n].join("."))}}return r}function n(t,r,n,o,i){var c=e(),p=s[t.name]||{},l=React.createElement(a,{init:c,callback:i,comp:t,props:n,properties:p||{},state:o});return r?void ReactDOM.render(l,r):l}function o(t,n,o,i,c){var p=i&&c?r(i,c):e(),l=s[t.name]||{},u=React.createElement(a,{init:p,comp:t,key:n.key,props:n,properties:l||{},state:o});return u}function i(t,e){t=t.name||t,s[t]=e}var s={},a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return _inherits(e,t),_createClass(e,[{key:"componentWillMount",value:function(){this.props.init.prototype=this.props.properties;var t=new this.props.init(this);this.controller=t,this.setState(this.props.state),this.props.callback&&this.props.callback(t)}},{key:"render",value:function(){var t=this.props.comp;return React.createElement(t,{state:this.state,controller:this.controller,props:this.props.props,properties:this.props.properties})}}]),e}(React.Component);return{render:n,component:o,create:i}}();
